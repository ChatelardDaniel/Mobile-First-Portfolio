<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Dom virtuel avec le JSX - interpolation</title>
    <!-- Lien cdn babel pour utiliser le JSX -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.20.6/babel.js"
        integrity="sha512-k99uQ0ucYP1eFec0sPTnIJ0vDmJOy274k7qCKCtGb2HkcaPTTjZooCqOIvEuSjKgpqDY78YIK7y+vKL7hrIwFQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- Lien cdn react -->
    <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
</head>
<!--
    L'interpolation est une manière de créer un one-way data binding en affichant une variable dans le template ou en injectant le contenu d'une variable dans un attribut ou prop d'un élément JSX. Il est possible d'écrire toute expression JavaScript entre les accolades d'une interpolation : celle-ci sera interprétée par React.
-->
<body>
    <div id="root"></div>
    <!-- Activer babel en mettant type="text/babel" dans la balise script.-->
    <script type="text/babel">
        // JSX
        let firstname = 'Jules';

        // le code html ne sera pas exécuté, il faudra forcer l'affichage avec  dangerouslySetInnerHTML={{__html: description}}
        let description = 'Lorem <strong>ipsum dolor sit amet</strong>';
        
        //La syntaxe JSX, bien que très proche de la syntaxe HTML, présente pourtant des différences expliquées par le fait que JSX n'est rien d'autre qu'une extension de JavaScript. Certains mots réservés vont nous forcer à modifier légèrement nos habitudes, alors qu'une certaine liberté nous est offerte en écrivant du JSX, en particulier sur les aspects des balises auto-fermantes et sur la protection contre les failles XSS.

        // JSX offre une protection par défaut pour les attaques de type XSS : Cross-Site Scripting. Pour pallier ce type d'attaques, toute chaîne interpolée par React en JSX est échappée par défaut, et tout code qui s'y trouverait est par conséquent rendu inerte. Il existe un moyen d’interpréter du code HTML en JSX en le passant explicitement dans la prop dangerouslySetInnerHTML, mais il convient d'être certain d'avoir nettoyé la source qui sera affichée avec cette prop pour être sûr qu'elle ne contient pas de code malveillant.
        
        const el = (
            <React.Fragment>
                <h1>Interpolation</h1>
                <p>{firstname.toUpperCase()}</p>
                <input type="text" value={firstname}/>
                <p dangerouslySetInnerHTML={{__html: description}}></p>
            </React.Fragment>
        );
        ReactDOM.render(el, document.getElementById('root'));
    </script>
</body>

</html>